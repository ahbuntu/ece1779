:javascript
  $().ready(function() {
    $.ajax({
        url: "/manager/elb_status",
        cache: false,
        success: function(html){
          $("#elb-status").html(html);
        }
    });

    $.ajax({
        url: "/manager/image_stats",
        cache: false,
        success: function(html){
          $("#image-stats").html(html);
        }
    });

    $.ajax({
        url: "/manager/worker_status",
        cache: false,
        success: function(html){
          $("#worker-status").html(html);
          $('#form-worker-refresh .spinner').hide();
        }
    });

    $('#form-worker-refresh input[name="commit"]').click(function() {
      $('#form-worker-refresh .spinner').show();
    });

    $('#form-autoscale input[name="commit"]').click(function() {
      $('#form-autoscale .spinner').show();
    });

    $('#form-autoscale .spinner').hide();
  });

=#{ #$(document).ready(function() {setInterval(function() {$("#worker-status").load("/manager/worker_status");}, 30000);});}

%h2 Load Balancer
#elb-status
  = image_tag("spinner.gif", :alt => "Loading...", :style => "height: 25px;", :class => "spinner")

- if !@load_balancer_contains_master && @master_worker.present?
  %hr
  %h2 Master
  .container-fluid
    .row
      %table.table.table-striped
        %thead
          %tr
            %th Name
            %th IP
            %th AMI
            %th Hostname
            %th Status
        %tbody
          %tr
            %td= @master_worker.instance.id
            %td= worker_public_ip(@master_worker)
            %td= @master_worker.instance.image.id
            %td= worker_public_dns(@master_worker)
            %td= @master_worker.status

%hr
%h2 Worker Pool
#form-worker-refresh
  = form_tag manager_worker_status_path, method: 'get', remote: true do
    = submit_tag "Refresh", class: "btn btn-default"
    = image_tag("spinner.gif", :alt => "Loading...", :style => "height: 25px;", :class => "spinner")
    #worker-status

%hr
%h2 Image Stats
#image-stats
  = image_tag("spinner.gif", :alt => "Loading...", :style => "height: 25px;", :class => "spinner")

%hr
%h3 Auto-Scaling: Configuration
#form-autoscale
  = form_tag manager_auto_scale_path, remote: true do
    #autoscale-config
      .form-group
        = check_box_tag 'autoscale[enabled]', 1, @autoscale.enabled?
        Enable Auto-Scaling
      .form-group
        CPU threshold for growing the working pool
        = text_field_tag 'autoscale[grow_cpu_thresh]', @autoscale.grow_cpu_thresh
      .form-group
        CPU threshold for shrinking the working pool
        = text_field_tag 'autoscale[shrink_cpu_thresh]', @autoscale.shrink_cpu_thresh
      .form-group
        Ratio for growing the working pool
        = text_field_tag 'autoscale[grow_ratio_thresh]', @autoscale.grow_ratio_thresh
      .form-group
        Ratio for shrinking the working pool
        = text_field_tag 'autoscale[shrink_ratio_thresh]', @autoscale.shrink_ratio_thresh
      .form-group
        Max instances
        = text_field_tag 'autoscale[max_instances]', @autoscale.max_instances

    .form-group
      = submit_tag "Update",  class: "btn btn-info", id: "update"
      = image_tag("spinner.gif", :alt => "Updating...", :style => "height: 25px;", :class => "spinner")

